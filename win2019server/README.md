# win2019server

## Оформление и настройка записей

1. Оформить VPS Облачный сервер Windows Server 2019 [reg.ru](https://www.reg.ru/vps/windows)
2. Купить необходимый домен example.ru
3. Перенаправить dns домена на ns5.hosting.reg.ru и ns6.hosting.reg.ru ([подробнее](https://help.reg.ru/hc/ru/articles/4408054628241-%D0%9A%D0%B0%D0%BA-%D0%BF%D1%80%D0%B8%D0%B2%D1%8F%D0%B7%D0%B0%D1%82%D1%8C-%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD-%D0%BA-%D0%9E%D0%B1%D0%BB%D0%B0%D1%87%D0%BD%D0%BE%D0%BC%D1%83-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D1%83))
4. Создать А запись example.ru на ip сервера 3600 TTL. Использовать для этого интерфейс DNSadmin, логин и пароль пришлось просить у поддержки ([подробнее](https://help.reg.ru/hc/ru/articles/4408047178001))
5. Подождать до 24 часов для dns и до часа для применения A записи

## Настройка сервера
1. Подключиться к серверу по RDP
2. Установить nginx с [офф сайта](http://nginx.org/ru/download.html)
3. Прописать адрес сайта example.ru в nginx.conf (по умолчанию находится в папке по пути установки)
4. Запустить nginx через .exe. Проверить что localhost работает и показывает заглушку nginx'а. (Чтобы перезапустить nginx необходимо убить процесс в Диспетчере задач и запустить заново)
5. Создать правило в Брандмауэр Windows для разрешения входящих подключений к порту
5. Проверить что сайт example.ru заработал на http
7. Активировать SSL сертификат используя certbot для https ([инструкция](https://www.youtube.com/watch?v=snXIDRrZMpM))